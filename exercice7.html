<!DOCTYPE html>
<html>

<head>
    <meta charset="utf8" />
    <link rel="stylesheet" media="screen" href="exercice7.css" />
</head>

<body>


    <div class="content">

        <h1>TODO List</h1>

        <ul id="todolist">
        </ul>

        <input id="todotxt" type="text" />
        <button id="addtodo" onclick="ajouter()" type="button">Ajouter</button>
    </div>
    <script>
        function ajouter() {
            var newPuce = document.createElement("li");
            var att = document.createAttribute("onclick");
            //'this' fait référence  à l'événement qui se produit dans le scope.
            att.value = "buttonSupprimer(this)";
            newPuce.setAttributeNode(att);
            var newText = document.createTextNode((document.getElementById('todotxt')).value);
            newPuce.appendChild(newText);
            document.body.appendChild(newPuce);
        }

        //on ajoute 'item', car le scope change 
        //et donc 'this' ne serait pas le même
        function buttonSupprimer(item) {
            if (confirm("Etes-vous sûr de vouloir supprimer cette tâche ?")) {
                txt = "You pressed OK!";
                //faire attention ici la fonction n'est pas porpagée. 
                //il faut alors récupérer le parent            
                item.parentNode.removeChild(item);
            } else {
                txt = "You pressed Cancel!";
            }
        }
    </script>
</body>

</html>